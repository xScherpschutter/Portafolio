---
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Portafolio de desarrollador full-stack.">
    <meta name="keywords" content="desarrollador, pixel art, portfolio, web development, mobile development, react development, python development, javascript development">
    <meta name="author" content="xScherpschutter">
    
    <!-- Open Graph -->
    <meta property="og:title" content={title}>
    <meta property="og:description" content="Desarrollador Fullstack">
    <meta property="og:type" content="website">
    
    <!-- Favicon alternativo para tema retro -->
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA">
  </head>
  <body class="scan-lines">
    <!-- Barra de navegación -->
    <nav class="fixed top-0 left-0 right-0 z-50 pixel-box bg-pixel-black bg-opacity-90 backdrop-blur-sm">
      <div class="max-w-6xl mx-auto px-4 py-4">
        <div class="flex justify-between items-center">
          <div class="text-xl font-black text-pixel-blue glow-text">
            &#60;xScherpschutter&#47;&#62;
          </div>
          
          <div class="hidden md:flex space-x-6">
            <a href="#hero" class="nav-link text-pixel-white hover:text-pixel-blue transition-colors">INICIO</a>
            <a href="#about" class="nav-link text-pixel-white hover:text-pixel-green transition-colors">SOBRE_MÍ</a>
            <a href="#projects" class="nav-link text-pixel-white hover:text-pixel-yellow transition-colors">PROYECTOS</a>
            <a href="#contact" class="nav-link text-pixel-white hover:text-pixel-purple transition-colors">CONTACTO</a>
          </div>
          
          <!-- Botón mobile -->
          <button id="mobile-menu-btn" class="md:hidden text-pixel-white text-2xl">
            ☰
          </button>
        </div>
      </div>
      
      <!-- Menú mobile -->
      <div id="mobile-menu" class="md:hidden hidden bg-pixel-black bg-opacity-95 p-4">
        <div class="flex flex-col space-y-4">
          <a href="#hero" class="nav-link text-pixel-white hover:text-pixel-blue transition-colors">INICIO</a>
          <a href="#about" class="nav-link text-pixel-white hover:text-pixel-green transition-colors">SOBRE_MÍ</a>
          <a href="#projects" class="nav-link text-pixel-white hover:text-pixel-yellow transition-colors">PROYECTOS</a>
          <a href="#contact" class="nav-link text-pixel-white hover:text-pixel-purple transition-colors">CONTACTO</a>
        </div>
      </div>
    </nav>

    <main>
      <slot />
    </main>

    <!-- Footer pixelado -->
    <footer class="bg-pixel-black border-t-2 border-pixel-blue py-8">
      <div class="max-w-6xl mx-auto px-4 text-center">
        <div class="text-pixel-white mb-4">
          © 2024 xScherpschutter
        </div>
        <div class="text-pixel-blue text-sm">
          Hecho con Astro + Tailwind CSS
        </div>
      </div>
    </footer>

    <!-- Scripts globales -->
    <script>
      // Navegación móvil
      const mobileMenuBtn = document.getElementById('mobile-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      
      mobileMenuBtn?.addEventListener('click', () => {
        mobileMenu?.classList.toggle('hidden');
      });
      
      // Scroll suave y actualización de navegación activa
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
          // Cerrar menú móvil si está abierto
          mobileMenu?.classList.add('hidden');
        });
      });
      
      // Animaciones de scroll
      function initScrollAnimations() {
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              const delay = entry.target.dataset.delay || 0;
              setTimeout(() => {
                entry.target.classList.add('visible');
              }, delay);
            }
          });
        }, observerOptions);
        
        // Observar elementos con animaciones
        document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach((el) => {
          observer.observe(el);
        });
      }
      
      // Efecto de typing para textos
      function typeWriter(element, text, speed = 50) {
        let i = 0;
        element.innerHTML = '';
        
        function typing() {
          if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(typing, speed);
          }
        }
        typing();
      }
      
      // Inicializar cuando se carga el DOM
      document.addEventListener('DOMContentLoaded', () => {
        initScrollAnimations();
        
        // Efecto de matriz en el fondo
        createMatrixEffect();
      });
      
      // Efecto matriz para el fondo
      function createMatrixEffect() {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.style.position = 'fixed';
        canvas.style.top = '0';
        canvas.style.left = '0';
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.zIndex = '-1';
        canvas.style.opacity = '0.1';
        canvas.style.pointerEvents = 'none';
        
        document.body.appendChild(canvas);
        
        function resizeCanvas() {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const chars = '01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン';
        const fontSize = 16;
        const columns = canvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);
        
        function draw() {
          ctx.fillStyle = 'rgba(10, 10, 10, 0.05)';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          
          ctx.fillStyle = '#00ffff';
          ctx.font = fontSize + 'px monospace';
          
          for (let i = 0; i < drops.length; i++) {
            const text = chars[Math.floor(Math.random() * chars.length)];
            ctx.fillText(text, i * fontSize, drops[i] * fontSize);
            
            if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
              drops[i] = 0;
            }
            drops[i]++;
          }
        }
        
        setInterval(draw, 50);
      }
      
      // Efecto de glitch ocasional
      function glitchEffect() {
        const elements = document.querySelectorAll('.glow-text');
        elements.forEach(el => {
          if (Math.random() > 0.98) {
            el.style.textShadow = '2px 0 #ff0040, -2px 0 #00ffff';
            setTimeout(() => {
              el.style.textShadow = '';
            }, 100);
          }
        });
      }
      
      setInterval(glitchEffect, 500);
    </script>
    
    <style>
      .nav-link {
        font-weight: bold;
        font-family: 'Orbitron', monospace;
        position: relative;
      }
      
      .nav-link::after {
        content: '';
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        left: 0;
        background: linear-gradient(90deg, #00ffff, #ff00ff);
        transition: width 0.3s ease;
      }
      
      .nav-link:hover::after {
        width: 100%;
      }
    </style>
  </body>
</html>